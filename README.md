# R2 Sync

[ä¸­æ–‡](#ä¸­æ–‡) | [English](#english)

---

<a name="ä¸­æ–‡"></a>

## ä¸­æ–‡

é€šè¿‡ Cloudflare R2 å®ç° Obsidian å¤šç«¯åŒæ­¥çš„æ’ä»¶ã€‚

### åŠŸèƒ½ç‰¹æ€§

- ğŸ“¤ **ä¸Šä¼ æ–‡ä»¶** - å°†æœ¬åœ° Markdown æ–‡ä»¶ä¸Šä¼ åˆ° R2 å­˜å‚¨æ¡¶
- ğŸ“¥ **ä¸‹è½½æ–‡ä»¶** - ä» R2 å­˜å‚¨æ¡¶ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
- ğŸ”„ **åŒå‘åŒæ­¥** - è‡ªåŠ¨æ£€æµ‹æœ¬åœ°å’Œè¿œç¨‹å·®å¼‚ï¼Œè¿›è¡ŒåŒå‘åŒæ­¥
- â° **è‡ªåŠ¨åŒæ­¥** - æ”¯æŒè®¾ç½®è‡ªåŠ¨åŒæ­¥é—´éš”
- ğŸ“ **æ–‡ä»¶å¤¹åŒæ­¥** - å¯é€‰æ‹©åŒæ­¥ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ•´ä¸ªä»“åº“

### å®‰è£…

#### ä»ç¤¾åŒºå¸‚åœºå®‰è£…ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ Obsidian è®¾ç½®
2. è¿›å…¥ã€Œç¤¾åŒºæ’ä»¶ã€
3. æœç´¢ã€ŒR2 Syncã€
4. ç‚¹å‡»å®‰è£…å¹¶å¯ç”¨

#### æ‰‹åŠ¨å®‰è£…

1. ä» [Releases](https://github.com/sandrone-muou/obsidian-r2-sync/releases) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
2. è§£å‹åˆ° `.obsidian/plugins/obsidian-r2-sync/` ç›®å½•
3. åœ¨ Obsidian è®¾ç½®ä¸­å¯ç”¨æ’ä»¶

### é…ç½®

#### 1. è·å– Cloudflare R2 å‡­è¯

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ R2 å¯¹è±¡å­˜å‚¨
3. åˆ›å»ºå­˜å‚¨æ¡¶æˆ–ä½¿ç”¨ç°æœ‰å­˜å‚¨æ¡¶
4. åœ¨ã€Œç®¡ç† R2 API ä»¤ç‰Œã€ä¸­åˆ›å»º API ä»¤ç‰Œ
5. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Access Key ID
   - Secret Access Key
   - å­˜å‚¨æ¡¶åç§°
   - API ç«¯ç‚¹ï¼ˆæ ¼å¼ï¼š`https://<account_id>.r2.cloudflarestorage.com`ï¼‰

#### 2. é…ç½®æ’ä»¶

1. æ‰“å¼€ Obsidian è®¾ç½® â†’ R2 åŒæ­¥è®¾ç½®
2. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **å­˜å‚¨æ¡¶åç§°**ï¼šR2 å­˜å‚¨æ¡¶åç§°
   - **API ç«¯ç‚¹**ï¼š`https://<account_id>.r2.cloudflarestorage.com`
   - **Access Key ID**ï¼šAPI è®¿é—®å¯†é’¥ ID
   - **Secret Access Key**ï¼šAPI è®¿é—®å¯†é’¥
   - **åŒæ­¥æ–‡ä»¶å¤¹**ï¼ˆå¯é€‰ï¼‰ï¼šç•™ç©ºåˆ™åŒæ­¥æ•´ä¸ªä»“åº“
   - **è‡ªåŠ¨åŒæ­¥**ï¼šæ˜¯å¦å¯ç”¨è‡ªåŠ¨åŒæ­¥
   - **åŒæ­¥é—´éš”**ï¼šè‡ªåŠ¨åŒæ­¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰

### ä½¿ç”¨æ–¹æ³•

#### æµ‹è¯•è¿æ¥

ç‚¹å‡»ã€Œæµ‹è¯•è¿æ¥ã€æŒ‰é’®éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

#### æ‰‹åŠ¨åŒæ­¥

- **ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶**ï¼šå°†æœ¬åœ°æ‰€æœ‰ Markdown æ–‡ä»¶ä¸Šä¼ åˆ° R2
- **ä¸‹è½½æ‰€æœ‰æ–‡ä»¶**ï¼šä» R2 ä¸‹è½½æ‰€æœ‰æ–‡ä»¶åˆ°æœ¬åœ°
- **åŒå‘åŒæ­¥**ï¼šæ™ºèƒ½åŒæ­¥ï¼Œåªä¸Šä¼ /ä¸‹è½½æœ‰å·®å¼‚çš„æ–‡ä»¶

#### å‘½ä»¤é¢æ¿

ä½¿ç”¨ `Ctrl+P` æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
- `ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶åˆ° R2`
- `ä» R2 ä¸‹è½½æ‰€æœ‰æ–‡ä»¶`
- `åŒå‘åŒæ­¥`

#### åŠŸèƒ½åŒºå›¾æ ‡

ç‚¹å‡»å·¦ä¾§åŠŸèƒ½åŒºäº‘å›¾æ ‡å¯å¿«é€Ÿæ‰§è¡ŒåŒå‘åŒæ­¥ã€‚

### æ³¨æ„äº‹é¡¹

1. é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆå¤‡ä»½ç¬”è®°
2. åŒæ­¥ä»…æ”¯æŒ `.md` æ–‡ä»¶
3. æ–‡ä»¶å†²çªæ—¶ï¼Œè¿œç¨‹æ–‡ä»¶ä¼šè¢«è¦†ç›–
4. è¯·å¦¥å–„ä¿ç®¡ API å¯†é’¥ï¼Œä¸è¦æ³„éœ²

### è®¸å¯è¯

MIT License

---

<a name="english"></a>

## English

An Obsidian plugin for multi-device synchronization using Cloudflare R2.

### Features

- ğŸ“¤ **Upload Files** - Upload local Markdown files to R2 bucket
- ğŸ“¥ **Download Files** - Download files from R2 bucket to local
- ğŸ”„ **Bidirectional Sync** - Automatically detect local and remote differences for two-way sync
- â° **Auto Sync** - Support for setting automatic sync intervals
- ğŸ“ **Folder Sync** - Option to sync specific folders or the entire vault

### Installation

#### From Community Market (Recommended)

1. Open Obsidian Settings
2. Go to "Community plugins"
3. Search for "R2 Sync"
4. Click Install and Enable

#### Manual Installation

1. Download the latest version from [Releases](https://github.com/sandrone-muou/obsidian-r2-sync/releases)
2. Extract to `.obsidian/plugins/obsidian-r2-sync/` directory
3. Enable the plugin in Obsidian Settings

### Configuration

#### 1. Get Cloudflare R2 Credentials

1. Log in to [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. Go to R2 Object Storage
3. Create a bucket or use an existing one
4. Create an API token in "Manage R2 API Tokens"
5. Note the following information:
   - Access Key ID
   - Secret Access Key
   - Bucket Name
   - API Endpoint (format: `https://<account_id>.r2.cloudflarestorage.com`)

#### 2. Configure Plugin

1. Open Obsidian Settings â†’ R2 Sync Settings
2. Fill in the following:
   - **Bucket Name**: R2 bucket name
   - **API Endpoint**: `https://<account_id>.r2.cloudflarestorage.com`
   - **Access Key ID**: API access key ID
   - **Secret Access Key**: API secret access key
   - **Sync Folder** (optional): Leave empty to sync entire vault
   - **Auto Sync**: Enable/disable automatic sync
   - **Sync Interval**: Auto sync interval (minutes)

### Usage

#### Test Connection

Click "Test Connection" button to verify configuration.

#### Manual Sync

- **Upload All Files**: Upload all local Markdown files to R2
- **Download All Files**: Download all files from R2 to local
- **Bidirectional Sync**: Smart sync, only upload/download files with differences

#### Command Palette

Use `Ctrl+P` to open command palette, available commands:
- `Upload all files to R2`
- `Download all files from R2`
- `Bidirectional sync`

#### Ribbon Icon

Click the cloud icon in the left ribbon for quick bidirectional sync.

### Notes

1. Backup your notes before first use
2. Only `.md` files are supported for sync
3. Remote files will be overwritten in case of conflict
4. Keep your API keys secure and do not share them

### License

MIT License
